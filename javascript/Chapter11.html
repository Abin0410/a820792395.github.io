<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>DOM扩展 | 写前端的图图</title>
    <meta name="generator" content="VuePress 1.7.1">
    <link rel="icon" href="/image/login.jpg">
    <meta name="description" content="Hello, welcome to 写前端的图图 blog">
    
    <link rel="preload" href="/assets/css/0.styles.992cb7aa.css" as="style"><link rel="preload" href="/assets/js/app.0cc6c909.js" as="script"><link rel="preload" href="/assets/js/2.a8e9d1f6.js" as="script"><link rel="preload" href="/assets/js/36.6bc043a2.js" as="script"><link rel="prefetch" href="/assets/js/10.80b50171.js"><link rel="prefetch" href="/assets/js/11.2c508fe0.js"><link rel="prefetch" href="/assets/js/12.4d6f0888.js"><link rel="prefetch" href="/assets/js/13.6f580c42.js"><link rel="prefetch" href="/assets/js/14.7a78b5f1.js"><link rel="prefetch" href="/assets/js/15.514e8ea5.js"><link rel="prefetch" href="/assets/js/16.84f8a07b.js"><link rel="prefetch" href="/assets/js/17.ed7d9ff2.js"><link rel="prefetch" href="/assets/js/18.8a4c1f46.js"><link rel="prefetch" href="/assets/js/19.f8556811.js"><link rel="prefetch" href="/assets/js/20.60bd8661.js"><link rel="prefetch" href="/assets/js/21.a45ed15d.js"><link rel="prefetch" href="/assets/js/22.09d7cfce.js"><link rel="prefetch" href="/assets/js/23.e8951751.js"><link rel="prefetch" href="/assets/js/24.99102ccf.js"><link rel="prefetch" href="/assets/js/25.8d58833c.js"><link rel="prefetch" href="/assets/js/26.87984b4f.js"><link rel="prefetch" href="/assets/js/27.86d691d0.js"><link rel="prefetch" href="/assets/js/28.2ac2ae4c.js"><link rel="prefetch" href="/assets/js/29.0b41515a.js"><link rel="prefetch" href="/assets/js/3.e667873c.js"><link rel="prefetch" href="/assets/js/30.df369f02.js"><link rel="prefetch" href="/assets/js/31.49e81605.js"><link rel="prefetch" href="/assets/js/32.494d49c3.js"><link rel="prefetch" href="/assets/js/33.79936fb9.js"><link rel="prefetch" href="/assets/js/34.f31944cf.js"><link rel="prefetch" href="/assets/js/35.f03128a8.js"><link rel="prefetch" href="/assets/js/37.2a60adff.js"><link rel="prefetch" href="/assets/js/38.aff8700c.js"><link rel="prefetch" href="/assets/js/39.e2678f74.js"><link rel="prefetch" href="/assets/js/4.8bb38d9d.js"><link rel="prefetch" href="/assets/js/40.67f1d6e8.js"><link rel="prefetch" href="/assets/js/41.9cbac28f.js"><link rel="prefetch" href="/assets/js/42.6b497b94.js"><link rel="prefetch" href="/assets/js/5.6fd351bc.js"><link rel="prefetch" href="/assets/js/6.753ccb79.js"><link rel="prefetch" href="/assets/js/7.1625cc39.js"><link rel="prefetch" href="/assets/js/8.131034f0.js"><link rel="prefetch" href="/assets/js/9.2ea18007.js">
    <link rel="stylesheet" href="/assets/css/0.styles.992cb7aa.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><!----> <span class="site-name">写前端的图图</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/" class="nav-link">
  主页
</a></div><div class="nav-item"><a href="/javascript/" class="nav-link router-link-active">
  JavaScript
</a></div><div class="nav-item"><a href="/es6/" class="nav-link">
  ECMAScript6
</a></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/" class="nav-link">
  主页
</a></div><div class="nav-item"><a href="/javascript/" class="nav-link router-link-active">
  JavaScript
</a></div><div class="nav-item"><a href="/es6/" class="nav-link">
  ECMAScript6
</a></div> <!----></nav>  <ul class="sidebar-links"><li><section class="sidebar-group depth-0"><p class="sidebar-heading open"><span>JavaScript</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/javascript/Chapter3.html" class="sidebar-link">基础</a></li><li><a href="/javascript/Chapter4.html" class="sidebar-link">变量、作用域和内存问题</a></li><li><a href="/javascript/Chapter5.html" class="sidebar-link">引用类型</a></li><li><a href="/javascript/Chapter6.html" class="sidebar-link">面向对象</a></li><li><a href="/javascript/Chapter7.html" class="sidebar-link">函数表达式</a></li><li><a href="/javascript/Chapter8.html" class="sidebar-link">BOM</a></li><li><a href="/javascript/Chapter10.html" class="sidebar-link">DOM</a></li><li><a href="/javascript/Chapter11.html" aria-current="page" class="active sidebar-link">DOM扩展</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/javascript/Chapter11.html#选择符api" class="sidebar-link">选择符API</a></li><li class="sidebar-sub-header"><a href="/javascript/Chapter11.html#元素遍历" class="sidebar-link">元素遍历</a></li><li class="sidebar-sub-header"><a href="/javascript/Chapter11.html#html5" class="sidebar-link">HTML5</a></li><li class="sidebar-sub-header"><a href="/javascript/Chapter11.html#专有扩展" class="sidebar-link">专有扩展</a></li></ul></li><li><a href="/javascript/Chapter12.html" class="sidebar-link">DOM2和DOM3</a></li><li><a href="/javascript/Chapter13.html" class="sidebar-link">事件</a></li><li><a href="/javascript/Chapter14.html" class="sidebar-link">表单脚本</a></li><li><a href="/javascript/Chapter15.html" class="sidebar-link">使用Canvas绘图</a></li><li><a href="/javascript/Chapter16.html" class="sidebar-link">HTML5脚本编程</a></li><li><a href="/javascript/Chapter20.html" class="sidebar-link">JSON</a></li><li><a href="/javascript/Chapter21.html" class="sidebar-link">Ajax与Comet</a></li><li><a href="/javascript/Chapter22.html" class="sidebar-link">高级技巧</a></li></ul></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="dom扩展"><a href="#dom扩展" class="header-anchor">#</a> DOM扩展</h1> <h2 id="选择符api"><a href="#选择符api" class="header-anchor">#</a> 选择符API</h2> <h3 id="queryselector"><a href="#queryselector" class="header-anchor">#</a> querySelector()</h3> <p><strong>querySelector()</strong> 方法接收一个CSS选择符，返回与该模式匹配的第一个元素，如果没有找到匹配的元素，返回null。看下面的例子。</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// 取得body元素</span>
<span class="token keyword">var</span> body <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">querySelector</span><span class="token punctuation">(</span><span class="token string">&quot;body&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// 取得ID为&quot;myDiv&quot;元素</span>
<span class="token keyword">var</span> myDiv <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">querySelector</span><span class="token punctuation">(</span><span class="token string">&quot;#myDiv&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// 取得类为&quot;selected&quot;的第一个元素</span>
<span class="token keyword">var</span> selected <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">querySelector</span><span class="token punctuation">(</span><span class="token string">&quot;.selected&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// 取得类为&quot;button&quot;的第一个图像元素</span>
<span class="token keyword">var</span> img <span class="token operator">=</span> document<span class="token punctuation">.</span>body<span class="token punctuation">.</span><span class="token function">querySelector</span><span class="token punctuation">(</span><span class="token string">&quot;img.button&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h3 id="queryseletorall"><a href="#queryseletorall" class="header-anchor">#</a> querySeletorAll()</h3> <p><strong>querySeletorAll()</strong> 方法接收的参数和 <strong>querySeletor()</strong> 方法一样，返回的是所有匹配的元素。这个方法返回的是一个NodeList的实例。</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// 取得某&lt;div&gt;中的所有&lt;em&gt;元素</span>
<span class="token keyword">var</span> ems <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">&quot;myDiv&quot;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">querySelectorAll</span><span class="token punctuation">(</span><span class="token string">&quot;em&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// 取得类为&quot;selected&quot;的所有元素</span>
<span class="token keyword">var</span> selected <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">querySelectorAll</span><span class="token punctuation">(</span><span class="token string">&quot;.selected&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// 取得所有&lt;p&gt;元素中的所有&lt;strong&gt;元素</span>
<span class="token keyword">var</span> strongs <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">querySelectorAll</span><span class="token punctuation">(</span><span class="token string">&quot;p strong&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h2 id="元素遍历"><a href="#元素遍历" class="header-anchor">#</a> 元素遍历</h2> <p><strong>childElementCount</strong>：返回子元素的个数（不包括文本节点和注释）。</p> <p><strong>firstElementChild</strong>：指向第一个子元素；</p> <p><strong>lastElementChild</strong>：指向最后一个子元素；</p> <p><strong>previousElementSibling</strong>：指向前一个同辈元素；</p> <p><strong>nextElementSibling</strong>：指向后一个同辈元素；</p> <h2 id="html5"><a href="#html5" class="header-anchor">#</a> HTML5</h2> <h3 id="与类相关的扩充"><a href="#与类相关的扩充" class="header-anchor">#</a> 与类相关的扩充</h3> <p><strong>getElementsByClassName()</strong> 方法接收一个参数，即一个包含一或多个类型的字符串，返回带有指定类的所有元素的 <strong>NodeList</strong> 。</p> <div class="language-JS extra-class"><pre class="language-js"><code><span class="token comment">// 取得所有类中包含&quot;username&quot;和&quot;current&quot;的元素，类名的先后顺序无所谓</span>
<span class="token keyword">var</span> allCurrentUsernames <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">getElementsByClassName</span><span class="token punctuation">(</span><span class="token string">&quot;username current&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// 取得ID为&quot;myDiv&quot;的元素中带有类名&quot;selected&quot;的所有元素</span>
<span class="token keyword">var</span> selected <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">&quot;myDiv&quot;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getElementsByClassName</span><span class="token punctuation">(</span><span class="token string">&quot;selected&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h3 id="classlist属性"><a href="#classlist属性" class="header-anchor">#</a> classList属性</h3> <p><strong>classList</strong> 属性返回DOMTokenList的实例。有一个表示自己包含多少元素的length属性。
此外这个新类型定义如下方法：</p> <p><strong>add()</strong>：将给定的类名添加到列表中。</p> <p><strong>contains()</strong>：表示列表中是否存在给定类名，如果存在则返回true，否则返回false。</p> <p><strong>remove()</strong>：从列表中删除给定的类名。</p> <p><strong>toggle()</strong>：如果列表中已经存在的类名，删除它，如果列表中没有给定的类名，添加它。</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">var</span> div <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">&quot;myDiv&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// 删除&quot;user&quot;类名</span>
div<span class="token punctuation">.</span>classList<span class="token punctuation">.</span><span class="token function">remove</span><span class="token punctuation">(</span><span class="token string">&quot;user&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// 添加&quot;current&quot;类名</span>
div<span class="token punctuation">.</span>classList<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token string">&quot;current&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// 切换&quot;user&quot;类名</span>
div<span class="token punctuation">.</span>classList<span class="token punctuation">.</span><span class="token function">toggle</span><span class="token punctuation">(</span><span class="token string">&quot;user&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// 判断是否有包含既定的类名</span>
<span class="token keyword">if</span> <span class="token punctuation">(</span>div<span class="token punctuation">.</span>classList<span class="token punctuation">.</span><span class="token function">contains</span><span class="token punctuation">(</span><span class="token string">&quot;bd&quot;</span><span class="token punctuation">)</span> <span class="token operator">&amp;&amp;</span> <span class="token operator">!</span>div<span class="token punctuation">.</span>classList<span class="token punctuation">.</span><span class="token function">contains</span><span class="token punctuation">(</span><span class="token string">&quot;disabled&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token comment">// 执行操作</span>
<span class="token punctuation">}</span>
</code></pre></div><h3 id="焦点管理"><a href="#焦点管理" class="header-anchor">#</a> 焦点管理</h3> <p><strong>activeElement</strong> 属性，这个属性始终会引用DOM中当前获得了焦点的元素。元素获取焦点的方式有页面加载、用户输入和在代码中调用focus()（设置焦点）方法。来看例子。</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">var</span> button <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">&quot;myButton&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
button<span class="token punctuation">.</span><span class="token function">focus</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>document<span class="token punctuation">.</span>activeElement <span class="token operator">===</span> button<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// true</span>
</code></pre></div><p><strong>hasFocus()</strong> 方法，这个方法用于确定文档是否获得焦点。</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">var</span> button <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">&quot;myButton&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
button<span class="token punctuation">.</span><span class="token function">focus</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>document<span class="token punctuation">.</span><span class="token function">hasFocus</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h3 id="自定义数据属性"><a href="#自定义数据属性" class="header-anchor">#</a> 自定义数据属性</h3> <p>HTML5规定可以为元素添加非标准的属性，但要添加前缀data-，目的是为元素提供与渲染无关的信息，或者提供语义信息。这些属性可以任意添加、随便命名，只要以data-开头即可。看一个例子。</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">var</span> div <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">&quot;myDiv&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// 取得自定义属性的值</span>
<span class="token keyword">var</span> appId <span class="token operator">=</span> div<span class="token punctuation">.</span>dataset<span class="token punctuation">.</span>appid<span class="token punctuation">;</span>
<span class="token keyword">var</span> myName <span class="token operator">=</span> div<span class="token punctuation">.</span>dataset<span class="token punctuation">.</span>myname<span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>appId<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 12345</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>myName<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// xiaoli</span>

<span class="token comment">// 设置值</span>
div<span class="token punctuation">.</span>dataset<span class="token punctuation">.</span>appid <span class="token operator">=</span> <span class="token number">23456</span><span class="token punctuation">;</span>
div<span class="token punctuation">.</span>dataset<span class="token punctuation">.</span>myname <span class="token operator">=</span> <span class="token string">&quot;xiaoyan&quot;</span><span class="token punctuation">;</span>
</code></pre></div><h3 id="插入标记"><a href="#插入标记" class="header-anchor">#</a> 插入标记</h3> <p><strong>innerHTML</strong>属性返回与调用元素的所有子节点（包括元素、注释和文本节点）对应的HTML标记。看下面的例子。</p> <div class="language-html extra-class"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>content<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span><span class="token punctuation">&gt;</span></span>This is a<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>strong</span><span class="token punctuation">&gt;</span></span>paragraph<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>strong</span><span class="token punctuation">&gt;</span></span>with a list following it.<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>ul</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>li</span><span class="token punctuation">&gt;</span></span>Item 1<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>li</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>li</span><span class="token punctuation">&gt;</span></span>Item 2<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>li</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>li</span><span class="token punctuation">&gt;</span></span>Item 3<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>li</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>li</span><span class="token punctuation">&gt;</span></span>Item 4<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>li</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>ul</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><p>对于上面的<code>&lt;div&gt;</code>元素来说，它的innerHTML属性会返回如下字符串。</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">var</span> content <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">&quot;content&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>content<span class="token punctuation">.</span>innerHTML<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token operator">&lt;</span>p<span class="token operator">&gt;</span>This is a<span class="token operator">&lt;</span>strong<span class="token operator">&gt;</span>paragraph<span class="token operator">&lt;</span><span class="token operator">/</span>strong<span class="token operator">&gt;</span><span class="token keyword">with</span> a list following it<span class="token punctuation">.</span><span class="token operator">&lt;</span><span class="token operator">/</span>p<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span>ul<span class="token operator">&gt;</span>
  <span class="token operator">&lt;</span>li<span class="token operator">&gt;</span>Item <span class="token number">1</span><span class="token operator">&lt;</span><span class="token operator">/</span>li<span class="token operator">&gt;</span>
  <span class="token operator">&lt;</span>li<span class="token operator">&gt;</span>Item <span class="token number">2</span><span class="token operator">&lt;</span><span class="token operator">/</span>li<span class="token operator">&gt;</span>
  <span class="token operator">&lt;</span>li<span class="token operator">&gt;</span>Item <span class="token number">3</span><span class="token operator">&lt;</span><span class="token operator">/</span>li<span class="token operator">&gt;</span>
  <span class="token operator">&lt;</span>li<span class="token operator">&gt;</span>Item <span class="token number">4</span><span class="token operator">&lt;</span><span class="token operator">/</span>li<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>ul<span class="token operator">&gt;</span>
</code></pre></div><p>在写模式下，<strong>innerHTML</strong> 会根据指定的值创建新的DOM树，然后用这个DOM树完全替换
调用元素原先的所有子节点。看下面的例子。</p> <div class="language-js extra-class"><pre class="language-js"><code>  <span class="token keyword">var</span> content <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">&quot;content&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  content<span class="token punctuation">.</span>innerHTML <span class="token operator">=</span> <span class="token string">&quot;Hello world&quot;</span><span class="token punctuation">;</span>
</code></pre></div><h3 id="outerhtml属性"><a href="#outerhtml属性" class="header-anchor">#</a> outerHTML属性</h3> <p>在读模式下，outerHTML返回调用它的元素及所有子节点的HTML标签。在写模式下，
outerHTML会根据指定的HTML字符串创建新的DOM子树，然后用这个DOM子树完全替换
调用元素。</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">var</span> content <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">&quot;content&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>content<span class="token punctuation">.</span>outerHTML<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 返回了以下的字符串，包括&lt;div&gt;本身</span>
<span class="token operator">&lt;</span>div id<span class="token operator">=</span><span class="token string">&quot;content&quot;</span><span class="token operator">&gt;</span>
  <span class="token operator">&lt;</span>p<span class="token operator">&gt;</span>This is a<span class="token operator">&lt;</span>strong<span class="token operator">&gt;</span>paragraph<span class="token operator">&lt;</span><span class="token operator">/</span>strong<span class="token operator">&gt;</span><span class="token keyword">with</span> a list following it<span class="token punctuation">.</span><span class="token operator">&lt;</span><span class="token operator">/</span>p<span class="token operator">&gt;</span>
  <span class="token operator">&lt;</span>ul<span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span>li<span class="token operator">&gt;</span>Item <span class="token number">1</span><span class="token operator">&lt;</span><span class="token operator">/</span>li<span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span>li<span class="token operator">&gt;</span>Item <span class="token number">2</span><span class="token operator">&lt;</span><span class="token operator">/</span>li<span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span>li<span class="token operator">&gt;</span>Item <span class="token number">3</span><span class="token operator">&lt;</span><span class="token operator">/</span>li<span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span>li<span class="token operator">&gt;</span>Item <span class="token number">4</span><span class="token operator">&lt;</span><span class="token operator">/</span>li<span class="token operator">&gt;</span>
  <span class="token operator">&lt;</span><span class="token operator">/</span>ul<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
</code></pre></div><p>使用outerHTML属性以下面这种方式设置值：</p> <div class="language-js extra-class"><pre class="language-js"><code>  <span class="token keyword">var</span> content <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">&quot;content&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  content<span class="token punctuation">.</span>outerHTML <span class="token operator">=</span> <span class="token string">&quot;&lt;p&gt;This is  a paragraph.&lt;/p&gt;&quot;</span>
</code></pre></div><h3 id="insertadjacenthtml"><a href="#insertadjacenthtml" class="header-anchor">#</a> insertAdjacentHTML()</h3> <p><strong>insertAdjacentHTML()</strong> 方法接收两个参数：插入位置和要插入的HTML文本。第一个参数必须是以下的值之一：</p> <ul><li><strong>&quot;beforebegin&quot;</strong>：在当前元素之前差一个紧邻的同辈元素；</li> <li><strong>&quot;afterbegin&quot;</strong>：在当前元素之下插入一个新的子元素或在第一个子元素之前再插入新的子元素；</li> <li><strong>&quot;beforeend&quot;</strong>：在当前元素之下插入一个新的子元素或在最后一个子元素之后再插入新的子元素；</li> <li><strong>&quot;afterend&quot;</strong>：在当前元素之后插入一个紧邻的同辈元素。
来看下面的例子：</li></ul> <div class="language-js extra-class"><pre class="language-js"><code>  <span class="token keyword">var</span> content <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">&quot;content&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token comment">// 作为前一个同辈元素插入</span>
  content<span class="token punctuation">.</span><span class="token function">insertAdjacentHTML</span><span class="token punctuation">(</span><span class="token string">&quot;beforebegin&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;&lt;h1&gt;Hello world&lt;/h1&gt;&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token comment">// 作为第一个子元素插入</span>
  content<span class="token punctuation">.</span><span class="token function">insertAdjacentHTML</span><span class="token punctuation">(</span><span class="token string">&quot;afterbegin&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;&lt;h2&gt;Hello world&lt;/h2&gt;&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token comment">// 作为最后一个子元素插入</span>
  content<span class="token punctuation">.</span><span class="token function">insertAdjacentHTML</span><span class="token punctuation">(</span><span class="token string">&quot;beforeend&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;&lt;h3&gt;Hello world&lt;/h3&gt;&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token comment">// 作为后一个同辈元素插入</span>
  content<span class="token punctuation">.</span><span class="token function">insertAdjacentHTML</span><span class="token punctuation">(</span><span class="token string">&quot;afterend&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;&lt;h4&gt;Hello world&lt;/h4&gt;&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h3 id="内存与性能问题"><a href="#内存与性能问题" class="header-anchor">#</a> 内存与性能问题</h3> <p>替换子节点可能会导致浏览器的内存占用问题，尤其是在IE中，问题更加明显。在删除带有事件处理程序或引用了其他JavaScript对象子树时，就有可能导致内存占用问题。假设某个元素有一个事件处理程序（或者引用了一个JavaScript对象作为属性），在使用前述某个属性将该元素从文档树中删除后，元素与事件处理程序之间的绑定关系在内存中并没有一并删除。如果这种情况频繁出现，页面占用的内存数量就会明显增加。因此，在使用innerHTML、outerHTML属性和insertAdjacentHTML()方法时，最好先手动删除要被替换的元素的所有事件处理程序和JavaScript对象属性。</p> <h3 id="scrollintoview-方法"><a href="#scrollintoview-方法" class="header-anchor">#</a> scrollIntoView()方法</h3> <p>scrollIntoView()方法让当前的元素滚动到浏览器窗口的可视区域内，这个方法传入true作为参数，或者不传入任何参数，那么窗口滚动之后会让调用元素的顶部与视口顶部尽可能平齐。如果传入false做为参数，调用元素就会出现在视口中（可能的话，
调用元素的底部会与视口底部平齐。），取决于其他元素的布局情况，此元素可能不会完全滚动到顶端或底端。</p> <h2 id="专有扩展"><a href="#专有扩展" class="header-anchor">#</a> 专有扩展</h2> <h3 id="children属性"><a href="#children属性" class="header-anchor">#</a> children属性</h3> <p>children属性与childNodes没什么区别，都是用于获取元的子节点。</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">var</span> myList <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">&quot;myList&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>myList<span class="token punctuation">.</span>children<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// HTMLCollection(4)</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>myList<span class="token punctuation">.</span>children<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 返回第一个子元素，包含文本节点</span>
</code></pre></div><h3 id="contains-方法"><a href="#contains-方法" class="header-anchor">#</a> contains()方法</h3> <p><strong>contains()</strong> 用于某个节点是不是另一个子节点的后代这个方法接收一个参数，既要
检测的后代节点，如果被检测的节点是后代节点，该方法返回true；否则返回false。</p> <div class="language-js extra-class"><pre class="language-js"><code>console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>document<span class="token punctuation">.</span>documentElement<span class="token punctuation">.</span><span class="token function">contains</span><span class="token punctuation">(</span>myList<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// true</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>document<span class="token punctuation">.</span>documentElement<span class="token punctuation">.</span><span class="token function">contains</span><span class="token punctuation">(</span>document<span class="token punctuation">.</span>body<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// true</span>
</code></pre></div><h3 id="插入文本"><a href="#插入文本" class="header-anchor">#</a> 插入文本</h3> <h4 id="innertext属性"><a href="#innertext属性" class="header-anchor">#</a> innerText属性</h4> <p>通过innerText属性可以操作元素中包含的所有文本内容，包括子文档树中的文本。在读取值市，它会按照由浅入深的顺序，将子文档树中的所有文本拼接起来。在写入值时，结果会删除元素的所有子节点，插入包含相应文本值的文本节点。来看下面的例子：</p> <div class="language-html extra-class"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>content<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span><span class="token punctuation">&gt;</span></span>This is a <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>strong</span><span class="token punctuation">&gt;</span></span>paragraph<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>strong</span><span class="token punctuation">&gt;</span></span> with a list following it.<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>ul</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>li</span><span class="token punctuation">&gt;</span></span>Item 1<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>li</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>li</span><span class="token punctuation">&gt;</span></span>Item 2<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>li</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>li</span><span class="token punctuation">&gt;</span></span>Item 3<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>li</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>ul</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><p>对于这个例子中的<code>&lt;div&gt;</code>元素而言，其innerText属性会返回下列字符串：</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">var</span> content <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">&quot;content&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>content<span class="token punctuation">.</span>innerText<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// This is a paragraph with a list following it.</span>
<span class="token comment">//</span>
<span class="token comment">// Item 1</span>
<span class="token comment">// Item 2</span>
<span class="token comment">// Item 3</span>
</code></pre></div><p>使用innerText来设置这个<code>&lt;div&gt;</code>元素的内容，则只需一行代码：</p> <div class="language-js extra-class"><pre class="language-js"><code>content<span class="token punctuation">.</span>innerText <span class="token operator">=</span> <span class="token string">&quot;Hello world&quot;</span><span class="token punctuation">;</span>
</code></pre></div><p>执行这行代码后，页面的HTML代码就会变成如下所示。</p> <div class="language-html extra-class"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>content<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>Hello world<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><h4 id="outertext属性"><a href="#outertext属性" class="header-anchor">#</a> outerText属性</h4> <p><strong>outerText</strong> 和 <strong>innerText</strong> 基本上没有多大区别。在读取文本值时，和innerText的结果完全一样，但在写模式下，outerText不只是替换调用它的元素的子节点，而是会替换整个元素（包括子节点）。</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">var</span> content <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">&quot;content&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
content<span class="token punctuation">.</span>outerText <span class="token operator">=</span> <span class="token string">&quot;Hello world&quot;</span><span class="token punctuation">;</span>
</code></pre></div><p>本质上，新的文本节点会完全取代调用outerText的元素。此后，该元素就从文档中被删除，无法访问。由于这个属性会导致调用它的元素不存在，因此并不常用。建议尽可能不要使用这个属性。</p></div> <footer class="page-edit"><!----> <!----></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/javascript/Chapter10.html" class="prev">
        DOM
      </a></span> <span class="next"><a href="/javascript/Chapter12.html">
        DOM2和DOM3
      </a>
      →
    </span></p></div> </main></div><div class="global-ui"></div></div>
    <script src="/assets/js/app.0cc6c909.js" defer></script><script src="/assets/js/2.a8e9d1f6.js" defer></script><script src="/assets/js/36.6bc043a2.js" defer></script>
  </body>
</html>
